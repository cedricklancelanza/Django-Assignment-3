{% extends "base.html" %}
{% block title %}{{ announcement.title }}{% endblock %}

{% block content %}
<div class="card shadow-sm p-4 mx-auto" style="max-width: 700px; line-height: 1.6; text-align: justify;">
    <h2 class="mb-2">{{ announcement.title }}</h2>
    <p class="text-muted mb-4">Published {{ announcement.created_at|date:"M d, Y H:i" }}</p>

    <div id="short-text">
        {{ announcement.content|truncatechars:200|linebreaks }}
    </div>
    <div id="full-text" style="display:none;">
        {{ announcement.content|linebreaks }}
    </div>

    <div class="mt-4 d-flex gap-2">
        <button id="toggle-btn" class="btn btn-primary btn-sm">Read more</button>
        <a href="{% url 'announcement_list' %}" class="btn btn-secondary btn-sm">Back to list</a>
    </div>
</div>

<script>
    const btn = document.getElementById("toggle-btn");
    const shortText = document.getElementById("short-text");
    const fullText = document.getElementById("full-text");

    btn.addEventListener("click", () => {
        if (fullText.style.display === "none") {
            fullText.style.display = "block";
            shortText.style.display = "none";
            btn.textContent = "Show less";
        } else {
            fullText.style.display = "none";
            shortText.style.display = "block";
            btn.textContent = "Read more";
        }
    });
</script>
{% endblock %}
